<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bookshelf</title>
    <link rel="stylesheet" href="css/bookshelf.css" />
</head>

<body>
    <main class="page">
        <header class="intro hero">
            <div class="hero-heading">
                <h1>Bookshelf</h1>
                <p class="instruction-text" id="instruction-text">Click on a book spine to see its details</p>

            </div>
        </header>

        <div class="controls">
            <div class="search-wrapper" id="search-control">
                <input type="text" class="search-input" placeholder="Search books..." aria-label="Search books" />
                <button class="search-toggle" type="button" aria-label="Open search" data-tooltip="Search">
                    <span class="search-icon" aria-hidden="true">üîç</span>
                </button>
            </div>

            <button class="stats-toggle" type="button" aria-label="View library statistics"
                data-tooltip="Library Stats">
                <span class="stats-icon" aria-hidden="true">üìä</span>
            </button>

            <button class="random-toggle" type="button" aria-label="Pick a random book"
                data-tooltip="Bring a Random Book">
                <span class="random-icon" aria-hidden="true">üé≤</span>
            </button>

            <div class="custom-select" id="view-control">
                <button type="button" class="select-trigger" aria-haspopup="listbox" aria-expanded="false"
                    aria-label="Change View">
                    <span class="trigger-text">View as</span>
                    <span class="trigger-icon" aria-hidden="true">‚ñº</span>
                </button>
                <ul class="select-options" role="listbox" id="view-list" hidden>
                    <li class="option" role="option" data-view="shelf" tabindex="0">Shelf</li>
                    <li class="option" role="option" data-view="stack" tabindex="0">Stacks</li>
                    <li class="option" role="option" data-view="coverflow" tabindex="0">Coverflow</li>
                </ul>
            </div>

            <div class="custom-select" id="sort-control">
                <button type="button" class="select-trigger" aria-haspopup="listbox" aria-expanded="false"
                    aria-label="Sort books">
                    <span class="trigger-text">Sort By</span>
                    <span class="trigger-icon" aria-hidden="true">‚ñº</span>
                </button>
                <ul class="select-options" role="listbox" id="sort-list" hidden>
                    <li class="option" role="option" data-value="author" tabindex="0">Author</li>
                    <li class="option" role="option" data-value="title" tabindex="0">Title</li>
                    <li class="option" role="option" data-value="year" tabindex="0">Year</li>
                </ul>
            </div>
        </div>



        <section class="bookshelf-section">
            <div id="no-results" class="no-results" hidden>No books found.</div>
            <div id="bookshelf" class="bookshelf" aria-live="polite"></div>
        </section>

        <section class="details" id="details" hidden>
            <h2>Book Details</h2>
            <div class="details-card" aria-live="polite">
                <button class="details-copy" id="details-copy-btn" type="button" aria-label="Copy link to this book"
                    data-tooltip="Copy Link">
                    <span class="copy-icon" aria-hidden="true">&#x1F517;&#xFE0E;</span>
                </button>
                <button class="details-close" type="button" aria-label="Close details" data-tooltip="Close">√ó</button>
                <div class="details-cover" aria-hidden="true"></div>
                <div class="details-body">
                    <div class="details-heading">
                        <p class="details-title" data-field="title"></p>
                        <p class="details-author" data-field="author"></p>
                    </div>
                    <dl class="details-grid">
                        <div>
                            <dt>Translator</dt>
                            <dd data-field="translator"></dd>
                        </div>
                        <div>
                            <dt>Publisher</dt>
                            <dd data-field="publisher"></dd>
                        </div>
                        <div>
                            <dt>Binding</dt>
                            <dd data-field="binding"></dd>
                        </div>
                        <div>
                            <dt>Published</dt>
                            <dd data-field="published"></dd>
                        </div>
                        <div>
                            <dt>ISBN</dt>
                            <dd class="isbn-field">
                                <button class="isbn-trigger" type="button" data-field="isbn" aria-haspopup="true"
                                    aria-controls="isbn-popup" aria-expanded="false">
                                    -
                                </button>
                                <div class="isbn-popup" id="isbn-popup" role="menu" aria-hidden="true">
                                    <p class="isbn-popup-label">
                                        Open ISBN in
                                    </p>
                                    <a class="isbn-link" data-source="wikipedia" target="_blank"
                                        rel="noopener noreferrer" role="menuitem">
                                        Wikipedia Book Sources
                                    </a>
                                    <a class="isbn-link" data-source="goodreads" target="_blank"
                                        rel="noopener noreferrer" role="menuitem">
                                        Goodreads
                                    </a>
                                </div>
                            </dd>
                        </div>
                    </dl>
                </div>
            </div>
        </section>

        <section class="stats-overlay" id="stats-overlay" hidden>
            <div class="stats-card">
                <button class="stats-close" type="button" aria-label="Close statistics">√ó</button>
                <div class="stats-header">
                    <h2>Library Statistics</h2>
                </div>
                <div class="stats-grid">
                    <!-- Row 1: Premium Insights (2 items) -->
                    <div class="stats-item author-item">
                        <span class="stats-label">Top Author</span>
                        <span class="stats-value" id="stats-top-author">-</span>
                    </div>
                    <div class="stats-item publisher-item">
                        <span class="stats-label">Top Publisher</span>
                        <span class="stats-value" id="stats-top-publisher">-</span>
                    </div>

                    <!-- Row 2: Library Metrics (3 items) -->
                    <div class="stats-item total-item">
                        <span class="stats-label">Total Books</span>
                        <span class="stats-value" id="stats-total-books">0</span>
                    </div>
                    <div class="stats-item unique-authors-item">
                        <span class="stats-label">Unique Authors</span>
                        <span class="stats-value" id="stats-unique-authors">0</span>
                    </div>
                    <div class="stats-item unique-publishers-item">
                        <span class="stats-label">Unique Publishers</span>
                        <span class="stats-value" id="stats-unique-publishers">0</span>
                    </div>

                    <!-- Row 3: Trivia (3 items) -->
                    <div class="stats-item translation-item">
                        <span class="stats-label">Translation Rate</span>
                        <span class="stats-value" id="stats-translation-rate">0%</span>
                    </div>
                    <div class="stats-item golden-item">
                        <span class="stats-label">Golden Year</span>
                        <span class="stats-value" id="stats-golden-year">-</span>
                    </div>
                    <div class="stats-item color-item">
                        <span class="stats-label">Color Signature</span>
                        <div class="color-pill">
                            <div class="color-sample" id="color-signature"></div>
                            <span class="color-name" id="color-name">-</span>
                        </div>
                    </div>
                </div>

                <div class="stats-charts">
                    <div class="chart-section binding-distribution">
                        <h3>Binding Composition</h3>
                        <div class="binding-chart-wrapper">
                            <div class="segment-bar" id="binding-bar"></div>
                            <div class="segment-legend" id="binding-legend"></div>
                        </div>
                    </div>

                    <div class="chart-section decade-distribution">
                        <h3>Decade Distribution</h3>
                        <div class="bar-chart" id="decade-chart"></div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <noscript>
        <p class="noscript">
            JavaScript is required to render the bookshelf.
        </p>
    </noscript>

    <footer class="site-footer">
        Inspired by <a href="https://balajmarius.com/writings/vibe-coding-a-bookshelf-with-claude-code/" target="_blank"
            rel="noopener noreferrer">Marius Balaj</a>.
        Code available on <a href="https://github.com/aloglu/bookshelf" target="_blank"
            rel="noopener noreferrer">GitHub</a>.
    </footer>

    <button class="back-to-top" type="button" aria-label="Scroll to top" hidden>
        <span aria-hidden="true" class="arrow-icon">‚ûú</span>
    </button>

    <script src="data/books.js"></script>
    <script src="https://unpkg.com/lenis@1.1.20/dist/lenis.min.js"></script>
    <script src="js/bookshelf.js" defer></script>
</body>

</html>